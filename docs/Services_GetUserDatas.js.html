<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Services/GetUserDatas.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Services/GetUserDatas.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * fetch API datas and return it in an array, or return mocked datas if const mokedDatas = true
 *  used in MainComponent.jsx
 * for each function :
 * @param   {number} id user id
 * @return  {array |"error"}     user datas in an array
 */
 


import { USER_MAIN_DATA, USER_ACTIVITY, USER_AVERAGE_SESSIONS, USER_PERFORMANCE } from  "./datas.js"

const apisUrl = 'http://localhost:3000'
let mokedDatas = false // if we want to use test datas or real datas api
console.log(`mokedDatas in 'GetUserDatas  : ${mokedDatas}`)

/**
 * return USER_MAIN_DATA in an array
 * @param   {number} id user id
 * //@return  {array |"error"}     user datas in an array
 * @returns {Object}  
 * @throws {Error}
 */

 export async function GetUserMainDatas(id) {
  try {
    id = validInteger(id);
    if (!mokedDatas) {
      const response = await fetch(`${apisUrl}/user/${id}`);
      const dataUser = await response.json();
      //et surtout pas return await response.json().data;
      //moins bien :
      //let dataUser = await fetch(`${apisUrl}/user/${id}`).then((response) => response.json())     
      return dataUser.data
    } 
    return  USER_MAIN_DATA[0];
  } catch (error) {
    throw error;
  }
}/*
export async function GetUserDatasH(id) {      
    let result = ''

    if(!mokedDatas) {
      let dataUser = ''
      let isError = false;
        try {
          dataUser = await 
            fetch(`${apisUrl}/user/${id}`).then((response) => response.json())
        } catch (error) {
          console.log(error)
          isError = true;
        }
      
      result = isError ? "error" : dataUser.data
    }
    else {
      result = USER_MAIN_DATA[0]
    }
    //console.log(result) 
    return result;
}*/


/**
 * return USER_ACTIVITY datas in an array
 * @param   {number} id user id
 * @return  {array |"error"}     user datas in an array
 */

export async function GetUserActivity(id) {
  try {
      id = validInteger(id);
    if (!mokedDatas) {
      const response = await fetch(`${apisUrl}/user/${id}/activity`);
      const dataUser = await response.json();
      //et surtout pas return await response.json().data;
      //moins bien :
      //let dataUser = await fetch(`${apisUrl}/user/${id}`).then((response) => response.json())     
      return dataUser.data.sessions
    } 
    return  USER_ACTIVITY[0].sessions;
  } catch (error) {
    throw error;
  }
}


/**
 * return USER_AVERAGE_SESSIONS datas in an array
 * @param   {number} id user id
 * @return  {array |"error"}     user datas in an array
 */


export async function GetUserAverageSessions(id) { // ressemble a activity dans la structure
  try {
    id = validInteger(id);
    if (!mokedDatas) {
      const response = await fetch(`${apisUrl}/user/${id}/average-sessions`);
      const dataUser = await response.json();
      //et surtout pas return await response.json().data.sessions
      //moins bien :
      //let dataUser = await fetch(`${apisUrl}/user/${id}`).then((response) => response.json())     
      return dataUser.data.sessions
    } 
    return  USER_AVERAGE_SESSIONS[0].sessions;
  } catch (error) {
    throw error;
  }
}


/**
 * return USER_PERFORMANCE datas in an array
 * @param   {Integer} id user id
 * @return  {array |"error"}     user datas in an array
 */

export async function GetUserPerformance(id) {
  try {
    id = validInteger(id);
    if (!mokedDatas) {
      const response = await fetch(`${apisUrl}/user/${id}/performance`);
      const dataUser = await response.json();
      //et surtout pas return await response.json().data.data
      //moins bien :
      //let dataUser = await fetch(`${apisUrl}/user/${id}`).then((response) => response.json())     
      return dataUser.data.data
    } 
    return  USER_PERFORMANCE[0].data
  } catch (error) {
    throw error;
  }
}




function validInteger(num){
  num = parseInt(num);
  if (isNaN(num)) throw new Error("id is not an Integer");
  return num;
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#GetUserActivity">GetUserActivity</a></li><li><a href="global.html#GetUserAverageSessions">GetUserAverageSessions</a></li><li><a href="global.html#GetUserMainDatas">GetUserMainDatas</a></li><li><a href="global.html#GetUserPerformance">GetUserPerformance</a></li><li><a href="global.html#keyData">keyData</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Mon Nov 29 2021 22:06:19 GMT+0100 (heure normale dâ€™Europe centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
